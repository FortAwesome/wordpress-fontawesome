{"version":3,"sources":["webpack:///./src/Alert.js","webpack:///./src/Alert.module.css?ebb5","webpack:///./src/App.module.css?6f15","webpack:///./src/ConflictDetectionReporter.js","webpack:///./src/ConflictDetectionTimer.js","webpack:///./src/ErrorBoundary.js","webpack:///./src/ErrorFallbackView.js","webpack:///./src/ErrorFallbackView.module.css?4986","webpack:///./src/mountConflictDetectionReporter.js","webpack:///./src/store/actions.js","webpack:///./src/util/reportRequestError.js","webpack:///./src/util/sliceJson.js"],"names":["props","classnames","styles","type","getIcon","Alert","title","PropTypes","children","isRequired","STATUS","running","code","display","__","done","submitting","none","error","expired","ready","stopped","stopping","restarting","STYLES","container","position","fontFamily","right","bottom","width","height","maxHeight","border","borderRadius","boxShadow","background","zIndex","overflowY","fontSize","lineHeight","color","header","justifyContent","alignItems","padding","content","boxSizing","adminEyesOnly","margin","h1","h2","p","link","tally","textAlign","count","flexBasis","marginRight","fontWeight","timerRow","backgroundColor","button","opacity","cursor","badness","render","faExclamationTriangle","dispatch","useDispatch","settingsPageUrl","useSelector","state","troubleshootTabUrl","activeAdminTab","currentlyOnPluginAdminPage","window","currentlyOnTroubleshootTab","userAttemptedToStopScanner","unregisteredClients","unregisteredClientsBeforeDetection","recentConflictsDetected","scannerReady","scannerIsStopping","userStoppedScannerSuccessfully","runStatus","success","size","errorMessage","userAttemptToStopScanner","setConflictDetectionScanner","enable","expiredOrStoppedDiv","stoppingOrSubmittingDiv","status","None","Running","Restarting","Ready","Submitting","Stopping","Done","Object","k","has","Expired","Stopped","Error","faSkull","stopScanner","withErrorBoundary","SECONDS_PER_DAY","SECONDS_PER_HOUR","SECONDS_PER_MINUTE","days","Math","durationSeconds","hours","minutes","seconds","dropWhile","unit","acc","padStart","part","now","remaining","endTime","detectConflictsUntil","useState","secondsRemaining","useEffect","timeoutId","setTimeout","setTimer","timerString","clearTimeout","timeRemaining","sharedStyles","sprintf","ConflictDetectionTimer","addDescription","bool","React","constructor","errorInfo","componentDidCatch","console","fatalAlert","CONFLICT_DETECTION_SHADOW_HOST_ID","domReady","conflictDetectionShadowRootElement","document","shadow","mode","retargetEvents","faStyle","css","dom","cssText","shadowContainer","ReactDOM","store","shadowHost","restApiAxios","axios","CONFLICT_DETECTION_SCANNER_DURATION_MIN","CONFLICT_DETECTION_SCANNER_DEACTIVATION_DELTA_MS","COULD_NOT_SAVE_CHANGES_MESSAGE","COULD_NOT_CHECK_PREFERENCES_MESSAGE","NO_RESPONSE_MESSAGE","REQUEST_FAILED_MESSAGE","COULD_NOT_START_SCANNER_MESSAGE","COULD_NOT_SNOOZE_MESSAGE","confirmed","response","reportRequestError","trimmed","expectEmpty","data","get","foundUnexpectedData","sliced","sliceJson","errors","falsePositive","ok","preprocessResponse","e","error_data","request","failedRequestMessage","message","Promise","options","getState","toPairs","originalValue","change","val","unregisteredClientsDeletionStatus","deleteList","handleError","uiMessage","apiUrl","headers","apiNonce","blocklistUpdateStatus","blocklist","pendingOptions","detectedConflicts","activeKitToken","releases","concreteVersion","initialKitToken","handleKitsQueryError","handleKitUpdateError","refreshedKits","currentKitRefreshed","find","token","optionsUpdate","apiToken","runQueryKits","queryKits","nodesTested","showConflictDetectionReporter","payload","conflict","snooze","tab","actionStartType","actionEndType","ERROR_REPORT_PREAMBLE","UI_MESSAGE_DEFAULT","ERROR_REPORTING_ERROR","REST_NO_ROUTE_ERROR","REST_COOKIE_INVALID_NONCE_ERROR","OK_ERROR_PREAMBLE","ONE_OF_MANY_ERRORS_GROUP_LABEL","FALSE_POSITIVE_MESSAGE","UNCONFIRMED_RESPONSE_MESSAGE","TRIMMED_RESPONSE_PREAMBLE","EXPECTED_EMPTY_MESSAGE","MISSING_ERROR_DATA_MESSAGE","output","trace","wpErrors","errorData","msg","handleSingleWpErrorOutput","handleAllWpErrorOutput","start","parsed","nextStart","JSON","nextLeftBracket","nextLeftBrace","findJson","result","json"],"mappings":"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","file":"6.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './Alert.module.css'\nimport classnames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faInfoCircle,\n  faThumbsUp,\n  faSpinner,\n  faExclamationTriangle } from '@fortawesome/free-solid-svg-icons'\n\nfunction getIcon(props = {}){\n  switch(props.type){\n    case 'info':\n      return <FontAwesomeIcon icon={ faInfoCircle } title='info' fixedWidth />\n    case 'warning':\n      return <FontAwesomeIcon icon={ faExclamationTriangle } title='warning' fixedWidth />\n    case 'pending':\n      return <FontAwesomeIcon icon={ faSpinner } title='pending' spin fixedWidth />\n    case 'success':\n      return <FontAwesomeIcon icon={ faThumbsUp } title='success' fixedWidth />\n    default:\n      return <FontAwesomeIcon icon={ faExclamationTriangle } title='warning' fixedWidth />\n  }\n}\n\nfunction Alert(props = {}) {\n  return<div className={ classnames(styles['alert'], styles[`alert-${ props.type }`]) } role=\"alert\">\n    <div className={ styles['alert-icon'] }>\n      { getIcon(props) }\n    </div>\n    <div className={ styles['alert-message'] }>\n      <h2 className={ styles['alert-title'] }>\n        { props.title }\n      </h2>\n      <div className={ styles['alert-copy'] }>\n        { props.children }\n      </div>\n    </div>\n  </div>\n}\n\nAlert.propTypes = {\n  title: PropTypes.string.isRequired,\n  type: PropTypes.oneOf(['info', 'warning', 'success', 'pending']),\n  children: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.element)\n  ]).isRequired\n}\n\nexport default Alert\n","// extracted by mini-css-extract-plugin\nexport default {\"alert\":\"_37rTwYVYjHB0pg6iso3S2_\",\"alert-icon\":\"_1u7cy5-aNgYV-iJmg5Y2eP\",\"alert-title\":\"_28gkoW-Ld_7ZkCsa1vOZyC\",\"alert-message\":\"Acm10pRthEoE7OYjjuM1k\",\"alert-action\":\"_1vcRExcmXZlbMYfI2J2o88\",\"alert-warning\":\"_3yyMAjjrQSGu1mZUwVQMq8\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper-div\":\"_35TQI7cRRp15ydziejZNoy\",\"submit-wrapper\":\"_3QIm6lE3_EX2f59z0q3Ede\",\"submit-status\":\"_3TCHz_sQqjXivSbu8MiKvt\",\"fail\":\"_1YIouJH0q7UCTBBd12BrER\",\"fail-icon-container\":\"_353VvfAeyV-4WmJBZ-tkC0\",\"explanation\":\"_1vEI8NfIuh1fSKAYIdxKC-\",\"success\":\"_3R04ypbcTVjJT0DScCE87I\",\"icon\":\"_1fPOsMtv85dkpug7YpkldL\",\"section-title\":\"xPbM1D0hJUwyZDh0WkN3u\",\"section-divider\":\"_1cuQ6n0S--edzcQx_whnrh\",\"table-header\":\"_1bLoERoE-BGwskaCAkn6xw\",\"more-less\":\"_3tsAbJj5lQ3fpUeMEqDg-p\",\"scanner-actions\":\"_30U7EZBjBNVomna8JKHFEJ\",\"scanner-runstatus\":\"_1XXkMTmXJKrRINZtirKC7T\",\"faPrimary\":\"_1siOaPuEaRzWSp4fFZ_W2Y\",\"conflict-detection-timer\":\"QIDO3zZDiUtKj7XQmNN2d\",\"warning\":\"_1gtusG9lK7YrzXaZbZTTs4\",\"sr-only\":\"_1rRUnYP55zlaT6KqHN-cLO\",\"flex\":\"G4t9VUzKqEB2I8N67GSNt\",\"flex-row\":\"_1Zhm76V3gZvaSk2u-8LU4E\",\"flex-column\":\"DB4dpze5GBTvE0qtOuHn1\",\"relative\":\"_3XqW__5WId-s9mUanEZmsZ\",\"status\":\"U3KfFCq2Yg5XUwDHVTlA4\",\"good\":\"_35z3mEQb1qzaAr4-TTAsX7\",\"success-icon\":\"_2K4pJT9BAJLYON5sCxbLPN\",\"conflict\":\"_1Bl4DiNxOkbomwAWx332Pz\",\"conflict-icon\":\"_5VtDxQoJVBUEd_38XDCyv\",\"warning-icon\":\"_3uvV5f-ofcSZUWHmud2sQF\",\"space-left\":\"_1kBF31q6Fah4Pv3KJtbt9N\",\"input-radio-custom\":\"_2Wb5TPvigi6MHYYjcecbxu\",\"checked-icon\":\"_2qZbfXDutx3ncJTXjOwf71\",\"input-checkbox-custom\":\"_7iqaMqPpiHwXZU7zXE6dw\",\"unchecked-icon\":\"SQQV4UAUXLS5A0sgeAN9T\",\"option-label-explanation\":\"WHTCjS863LJavtuGbeTQ1\"};","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setConflictDetectionScanner, userAttemptToStopScanner } from './store/actions'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckCircle, faCog, faExclamationTriangle, faGrin, faSkull, faThumbsUp, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport { ADMIN_TAB_TROUBLESHOOT } from './store/reducers'\nimport ConflictDetectionTimer from './ConflictDetectionTimer'\nimport size from 'lodash/size'\nimport has from 'lodash/has'\nimport { __ } from '@wordpress/i18n'\nimport ErrorBoundary from './ErrorBoundary'\n\n// NOTE: We don't have Webpack set up to handle the loading of CSS modules in\n// a way that is compatible with our use of Shadow DOM. After a failed attempt\n// to do so, we'll just use the standard React Style Object technique for assigning\n// styles.\n// See: https://reactjs.org/docs/dom-elements.html#style\n\nconst STATUS = {\n  running: {\n    code: 'Running',\n    display: __( 'Running', 'font-awesome' )\n  },\n  done: {\n    code: 'Done',\n    display: __( 'Done', 'font-awesome' )\n  },\n  submitting: {\n    code: 'Submitting',\n    display: __( 'Submitting', 'font-awesome' )\n  },\n  none: {\n    code: 'None',\n    display: __( 'None', 'font-awesome' )\n  },\n  error: {\n    code: 'Error',\n    display: __( 'Error', 'font-awesome' )\n  },\n  expired: {\n    code: 'Expired',\n    display: __( 'Expired', 'font-awesome' )\n  },\n  ready: {\n    code: 'Ready',\n    display: __( 'Ready', 'font-awesome' )\n  },\n  stopped: {\n    code: 'Stopped',\n    display: __( 'Stopped', 'font-awesome' )\n  },\n  stopping: {\n    code: 'Stopping',\n    display: __( 'Stopping', 'font-awesome' )\n  },\n  restarting: {\n    code: 'Restarting',\n    display: __( 'Restarting', 'font-awesome' )\n  }\n}\n\nconst STYLES = {\n  container: {\n    position: 'fixed',\n    fontFamily:'\"Helvetica Neue\",Helvetica,Arial,sans-serif',\n    right: '10px',\n    bottom: '10px',\n    width: '450px',\n    height: 'auto',\n    maxHeight: '60%',\n    border: '1px solid #CDD4DB',\n    borderRadius: '3px',\n    boxShadow: '1px 1px 5px 0 rgba(132,142,151,.3)',\n    background: '#008DED',\n    zIndex: '99',\n    overflowY: 'scroll',\n    fontSize: '14px',\n    lineHeight: '1.4em',\n    color: '#fff'\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: '5px 20px', \n    color: '#CAECFF'\n  },\n  content: {\n    width: '100%',\n    padding: '0 20px 10px 20px',\n    boxSizing: 'border-box'\n  },\n  adminEyesOnly: {\n    margin: '0',\n    fontSize: '12px'\n  },\n  h1: {\n    margin: '.3em 0',\n    fontSize: '14px'\n  },\n  h2: {\n    margin: '.3em 0',\n    fontSize: '18px'\n  },\n  p: {\n    margin: '.5em 0'\n  },\n  link: {\n    color: '#fff'\n  },\n  tally: {\n    display: 'flex', \n    alignItems: 'center',\n    margin: '.5em 0', \n    textAlign: 'center'\n  },\n  count: {\n    flexBasis: '1em',\n    marginRight: '5px',\n    fontWeight: '600', \n    fontSize: '20px'\n  },\n  timerRow: {\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: '#0064B1',\n    padding: '10px 20px',\n    color: '#fff', \n    fontWeight: '600'\n  },\n  button: {\n    margin: '0 0 0 10px',\n    border: '0',\n    padding: '5px',\n    backgroundColor: 'transparent',\n    color: '#fff', \n    opacity: '.7',\n    cursor: 'pointer'\n  },\n  badness: {\n    padding: '20px 25px',\n    backgroundColor: '#FFC100',\n    color: '#202529'\n  }\n}\n\nfunction withErrorBoundary( Component ) {\n  return class extends ErrorBoundary {\n    render() {\n      return <div style={ STYLES.container }>\n        {\n          !!this.state.error\n          ? <div style={ STYLES.badness }>\n              <FontAwesomeIcon icon={ faExclamationTriangle } />\n            {\n              __( ' Whoops, this is embarrassing! Some unexpected error has occurred. There might be some additional diagnostic information in the JavaScript console.', 'font-awesome' )\n            }\n            </div>\n          : <Component />\n        }\n      </div>\n    }\n  }\n}\n\nfunction ConflictDetectionReporter() {\n  const dispatch = useDispatch()\n  const settingsPageUrl = useSelector(state => state.settingsPageUrl)\n  const troubleshootTabUrl = `${settingsPageUrl}&tab=ts`\n  const activeAdminTab = useSelector(state => state.activeAdminTab )\n  const currentlyOnPluginAdminPage = window.location.href.startsWith(settingsPageUrl)\n  const currentlyOnTroubleshootTab = currentlyOnPluginAdminPage && activeAdminTab === ADMIN_TAB_TROUBLESHOOT\n  const userAttemptedToStopScanner = useSelector(state => state.userAttemptedToStopScanner)\n\n  const unregisteredClients = useSelector(\n    state => state.unregisteredClients\n  )\n\n  const unregisteredClientsBeforeDetection = useSelector(\n    state => state.unregisteredClientDetectionStatus.unregisteredClientsBeforeDetection\n  )\n\n  const recentConflictsDetected = useSelector(\n    state => state.unregisteredClientDetectionStatus.recentConflictsDetected\n  )\n\n  const expired = useSelector(\n    state => !state.showConflictDetectionReporter\n  )\n\n  const restarting = useSelector(\n    state => expired && state.conflictDetectionScannerStatus.isSubmitting\n  )\n\n  const scannerReady = useSelector(\n    state => state.conflictDetectionScannerStatus.hasSubmitted && state.conflictDetectionScannerStatus.success\n  )\n\n  const scannerIsStopping = useSelector(\n    state => userAttemptedToStopScanner\n      && !state.conflictDetectionScannerStatus.hasSubmitted\n  )\n\n  const userStoppedScannerSuccessfully = useSelector(\n    state => userAttemptedToStopScanner\n      && !scannerIsStopping\n      && state.conflictDetectionScannerStatus.success\n  )\n\n  const runStatus = useSelector(state => {\n    const { isSubmitting, hasSubmitted, success } = state.unregisteredClientDetectionStatus\n    if (userAttemptedToStopScanner) {\n      if ( scannerIsStopping ) {\n        return STATUS.stopping\n      } else if (userStoppedScannerSuccessfully) {\n        return STATUS.stopped\n      } else {\n        // The user clicked to disable the scanner, and that action failed somehow.\n        // Probably a fluke in the communication between the browser and the WordPress server.\n        return STATUS.error\n      }\n    } else if (restarting) {\n      return STATUS.restarting\n    } else if ( expired ) {\n      return STATUS.expired\n    } else if (scannerReady) {\n      return STATUS.ready\n    } else if ( success && 0 === size( unregisteredClients ) ) {\n      return STATUS.none\n    } else if ( success ) {\n      return STATUS.done\n    } else if( isSubmitting ) {\n      return STATUS.submitting\n    } else if( !hasSubmitted ){\n      return STATUS.running\n    } else {\n      return STATUS.error\n    }\n  })\n\n  const errorMessage = useSelector(\n    state => state.unregisteredClientDetectionStatus.message\n  )\n\n  function stopScanner() {\n    dispatch(userAttemptToStopScanner())\n    dispatch(setConflictDetectionScanner({ enable: false }))\n  }\n\n  const expiredOrStoppedDiv = \n    <div>\n        <h2 style={ STYLES.tally }><span>{ size( unregisteredClients ) }</span> <span>&nbsp;{ __( 'Results to Review', 'font-awesome' ) }</span></h2>\n        <p style={ STYLES.p }>\n          {\n            currentlyOnTroubleshootTab\n            ? __( 'Manage results or restart the scanner here on the Troubleshoot tab.', 'font-awesome' )\n            : <>\n              {\n                __( 'Manage results or restart the scanner on the Troubleshoot tab.', 'font-awesome' )\n              } <a href={ troubleshootTabUrl } style={ STYLES.link }>{ __('Go', 'font-awesome' ) }</a>\n              </>\n          }\n      </p>\n    </div>\n\n  const stoppingOrSubmittingDiv =\n    <div>\n      <div style={ STYLES.status }>\n        <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faCog } size=\"sm\" spin /> <span>{ runStatus.display }</span></h2>\n      </div>\n    </div>\n\n  return (\n    <>\n      <div style={ STYLES.header }>\n        <h1 style={ STYLES.h1 }>{ __( 'Font Awesome Conflict Scanner', 'font-awesome' ) }</h1>\n        <p style={ STYLES.adminEyesOnly }>{ __( 'only admins can see this box', 'font-awesome' ) }</p>\n      </div>\n      <div style={ STYLES.content }>\n\n        {\n          {\n            None:\n              <div>\n                <div style={ STYLES.status }>\n                  <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faGrin } size=\"sm\" /> <span>{ __( 'All clear!', 'font-awesome' ) }</span></h2>\n                  <p style={ STYLES.p }>{ __( 'No new conflicts found on this page.', 'font-awesome' ) }</p>\n                </div>\n              </div>,\n            Running:\n              <div>\n                <div style={ STYLES.status }>\n                  <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faCog } size=\"sm\" spin /> <span>{ __( 'Scanning', 'font-awesome' ) }...</span></h2>\n                </div>\n              </div>,\n            Restarting:\n              <div>\n                <div style={ STYLES.status }>\n                  <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faCog } size=\"sm\" spin /> <span>{ __( 'Restarting', 'font-awesome' ) }...</span></h2>\n                </div>\n              </div>,\n            Ready:\n              <div>\n                <div>\n                  <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faThumbsUp } size=\"sm\" /> { __( 'Proton pack charged!', 'font-awesome' ) }</h2>\n                  <p style={ STYLES.p }>{ __( 'Wander through the pages of your web site and this scanner will track progress.', 'font-awesome' ) }</p>\n                </div>\n              </div>,\n            Submitting: stoppingOrSubmittingDiv,\n            Stopping: stoppingOrSubmittingDiv,\n            Done:\n              <div>\n                <div style={ STYLES.status }>\n                  <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faCheckCircle } size=\"sm\" /> <span>{ __( 'Page scan complete', 'font-awesome' ) }</span></h2>\n                </div>\n                <p style={ STYLES.tally }><span style={ STYLES.count }>{ size( Object.keys( recentConflictsDetected ).filter(k => ! has(unregisteredClientsBeforeDetection, k) ) ) }</span> <span>{ __( 'new conflicts found on this page', 'font-awesome' ) }</span></p>\n                <p style={ STYLES.tally }><span style={ STYLES.count }>{ size( unregisteredClients ) }</span> <span>total found</span>\n                {\n                  currentlyOnTroubleshootTab ?\n                  <span>&nbsp;({ __( 'manage conflicts here on the Troubleshoot tab', 'font-awesome' ) })</span>\n                  : <span>&nbsp;(<a href={ troubleshootTabUrl } style={ STYLES.link }>{ __( 'manage', 'font-awesome' ) }</a>)</span>\n                }\n                </p>\n              </div>,\n            Expired: expiredOrStoppedDiv,\n            Stopped: expiredOrStoppedDiv,\n            Error:\n              <div>\n                <h2 style={ STYLES.h2 }><FontAwesomeIcon icon={ faSkull } /> <span>{ __( 'Don\\'t cross the streams! It would be bad.', 'font-awesome' ) }</span></h2>\n                <p style={ STYLES.p }>\n                  { errorMessage }\n                </p>\n              </div>\n          }[runStatus.code]\n        }\n      </div>\n      <div style={ STYLES.timerRow }>\n        <span>\n          <ConflictDetectionTimer addDescription>\n            <button style={ STYLES.button } title={ __( 'Stop timer', 'font-awesome' ) } onClick={() => stopScanner()}>\n              <FontAwesomeIcon icon={ faTimesCircle } size=\"lg\" />\n            </button>\n          </ConflictDetectionTimer>\n        </span>\n        {\n          {\n            Expired: __( 'Timer expired', 'font-awesome' ),\n            Stopped: __( 'Timer stopped', 'font-awesome' ),\n            Restarting: null\n          }[runStatus.code]\n        }\n      </div>\n    </>\n  )\n}\n\nexport default withErrorBoundary( ConflictDetectionReporter )\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useSelector, useDispatch } from 'react-redux'\nimport sharedStyles from './App.module.css'\nimport padStart from 'lodash/padStart'\nimport dropWhile from 'lodash/dropWhile'\nimport { __, sprintf } from '@wordpress/i18n'\n\nconst SECONDS_PER_DAY = 60 * 60 * 24\nconst SECONDS_PER_HOUR = 60 * 60\nconst SECONDS_PER_MINUTE = 60\n\nexport function timerString(durationSeconds) {\n  const days = Math.floor(durationSeconds / SECONDS_PER_DAY)\n  const hours = Math.floor((durationSeconds - (days * SECONDS_PER_DAY)) / SECONDS_PER_HOUR)\n  const minutes = Math.floor((durationSeconds - (days * SECONDS_PER_DAY + hours * SECONDS_PER_HOUR)) / SECONDS_PER_MINUTE)\n  const seconds = durationSeconds - (days * SECONDS_PER_DAY + hours * SECONDS_PER_HOUR + minutes * SECONDS_PER_MINUTE)\n\n  return dropWhile(\n    [days, hours, minutes, seconds].reduce((acc, unit, index) => {\n      if(0 === index && unit !== 0){\n        acc.push(unit.toString())\n      } else {\n        acc.push(padStart(unit.toString(), 2, '0'))\n      }\n      return acc\n    }, []),\n    part => part.match(/^[0]+$/)\n  ).join(':')\n}\n\nfunction secondsRemaining(endTime) {\n  const now = Math.floor((new Date()) / 1000)\n  const remaining = endTime - now\n\n  return remaining < 0 ? 0 : remaining\n}\n\nexport default function ConflictDetectionTimer({ addDescription, children }) {\n  const detectConflictsUntil = useSelector(state => state.detectConflictsUntil)\n  const [timeRemaining, setTimer] = useState(secondsRemaining(detectConflictsUntil))\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    let timeoutId = null\n\n    if(secondsRemaining(detectConflictsUntil) > 0) {\n      timeoutId = setTimeout(() => setTimer(secondsRemaining(detectConflictsUntil)), 1000)\n    } else {\n      setTimer(timerString(0))\n      dispatch({\n        type: 'CONFLICT_DETECTION_TIMER_EXPIRED'\n      })\n    }\n\n    return () => timeoutId && clearTimeout( timeoutId )\n  }, [detectConflictsUntil, timeRemaining, dispatch])\n\n  return timeRemaining <= 0 ? null : <span className={ sharedStyles['conflict-detection-timer'] }>\n    { timerString( timeRemaining ) }\n    {\n      !!addDescription &&\n      (\n        timeRemaining > 60\n        /* translators: 1: space */\n        ? sprintf( __( '%1$sminutes left to browse your site for trouble', 'font-awesome' ), ' ' )\n        /* translators: 1: space */\n        : sprintf( __( '%1$sseconds left to browse your site for trouble', 'font-awesome' ), ' ' )\n      )\n    }\n    {\n      children\n    }\n    </span>\n}\n\nConflictDetectionTimer.propTypes = {\n  addDescription: PropTypes.bool\n}\n","import React from 'react'\nimport ErrorFallbackView from './ErrorFallbackView'\nimport { ERROR_REPORT_PREAMBLE } from './util/reportRequestError'\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      error: null,\n      errorInfo: null\n    }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.group(ERROR_REPORT_PREAMBLE)\n    console.log( error )\n    console.log( errorInfo )\n    console.groupEnd()\n    this.setState({error, errorInfo})\n  }\n\n  render() {\n    if (this.state.error) {\n      //render fallback UI\n      return <ErrorFallbackView />\n    } else {\n      //when there's not an error, render children untouched\n      return this.props.children\n    }\n  }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\nimport styles from './ErrorFallbackView.module.css'\nimport Alert from './Alert'\nimport { __ } from '@wordpress/i18n'\n\nexport const fatalAlert = <Alert title={ __( 'Whoops, this is embarrassing', 'font-awesome' ) } type='warning'>\n  <p>\n    {\n      __( 'Some unexpected error has occurred. There might be some additional diagnostic information in the JavaScript console.', 'font-awesome' )\n    }\n  </p>\n</Alert>\n\nfunction ErrorFallbackView() {\n  return <div className={ styles['error-fallback'] }>\n    { fatalAlert }\n  </div>\n}\n\nexport default ErrorFallbackView\n","// extracted by mini-css-extract-plugin\nexport default {\"error-fallback\":\"_2viBy1vHsxDVJMV0gFbHNT\",\"additional-message\":\"_1Rvae1cAbWT_FssxA1sa8n\"};","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport ConflictDetectionReporter from './ConflictDetectionReporter'\nimport { dom } from '@fortawesome/fontawesome-svg-core'\nimport { Provider } from 'react-redux'\nimport retargetEvents from 'react-shadow-dom-retarget-events'\nimport domReady from '@wordpress/dom-ready'\n\nexport const CONFLICT_DETECTION_SHADOW_HOST_ID = 'font-awesome-plugin-conflict-detection-shadow-host'\nexport function mountConflictDetectionReporter(store) {\n  domReady(() => {\n    const conflictDetectionShadowRootElement = document.createElement('DIV')\n    conflictDetectionShadowRootElement.setAttribute('id', CONFLICT_DETECTION_SHADOW_HOST_ID)\n    document.body.appendChild(conflictDetectionShadowRootElement)\n    const shadow = conflictDetectionShadowRootElement.attachShadow({ mode: 'open' })\n    // React doesn't seem to natively handle click events that originate inside\n    // a shadow DOM. This utility will cause things to work like you'd expect.\n    // See: https://github.com/spring-media/react-shadow-dom-retarget-events\n    retargetEvents(shadow)\n\n    const faStyle = document.createElement('STYLE')\n    const css = dom.css()\n    const cssText = document.createTextNode(css)\n    faStyle.appendChild(cssText)\n\n    const shadowContainer = document.createElement('DIV')\n\n    shadow.appendChild(faStyle)\n    shadow.appendChild(shadowContainer)\n\n    ReactDOM.render(\n      <Provider store={ store }>\n        <ConflictDetectionReporter />\n      </Provider>,\n      shadowContainer\n    )\n  })\n}\n\nexport function isConflictDetectionReporterMounted() {\n  const shadowHost = document.getElementById(CONFLICT_DETECTION_SHADOW_HOST_ID)\n  if(! shadowHost ) return false\n\n  return !!shadowHost.shadowRoot\n}\n","import axios from 'axios'\nimport toPairs from 'lodash/toPairs'\nimport size from 'lodash/size'\nimport get from 'lodash/get'\nimport find from 'lodash/find'\nimport reportRequestError from '../util/reportRequestError'\nimport { __ } from '@wordpress/i18n'\nimport has from 'lodash/has'\nimport sliceJson from '../util/sliceJson'\n\nconst restApiAxios = axios.create()\n\n// How far into the future from \"now\" until the conflict detection scanner\n// will be enabled.\nexport const CONFLICT_DETECTION_SCANNER_DURATION_MIN = 10\n\n// How far in the past to set detectConflictsUntil when the conflict detection\n// scanner is being disabled. We can use a non-zero but negligible value in\n// order to protect against possible race conditions, instead of 0\n// (which would just be exactly \"now\").\nconst CONFLICT_DETECTION_SCANNER_DEACTIVATION_DELTA_MS = 1\n\nconst COULD_NOT_SAVE_CHANGES_MESSAGE = __( 'Couldn\\'t save those changes', 'font-awesome' )\nconst COULD_NOT_CHECK_PREFERENCES_MESSAGE = __( 'Couldn\\'t check preferences', 'font-awesome' )\nconst NO_RESPONSE_MESSAGE = __( 'A request to your WordPress server never received a response', 'font-awesome' )\nconst REQUEST_FAILED_MESSAGE = __( 'A request to your WordPress server failed', 'font-awesome' )\nconst COULD_NOT_START_SCANNER_MESSAGE = __( 'Couldn\\'t start the scanner', 'font-awesome' )\nconst COULD_NOT_SNOOZE_MESSAGE = __( 'Couldn\\'t snooze', 'font-awesome' )\n \nfunction preprocessResponse( response ) {\n  const confirmed = has( response, 'headers.fontawesome-confirmation' )\n\n  if ( 204 === response.status && '' !== response.data ) {\n      reportRequestError({ error: null, confirmed, trimmed: response.data, expectEmpty: true })\n      // clean it up\n      response.data = {}\n      return response\n  } \n\n  const data = get(response, 'data', null)\n\n  const foundUnexpectedData = 'string' === typeof data && size(data) > 0\n\n  const sliced = foundUnexpectedData\n    ? sliceJson( data )\n    : {}\n  \n  // Fixup the response data if garbage was fixed\n  if ( foundUnexpectedData) {\n    if ( null === sliced ) {\n      reportRequestError({ error: null, confirmed, trimmed: data })\n      // clean it up\n      response.data = {}\n      return response\n    } else {\n      response.data = get(sliced, 'parsed')\n    }\n  }\n\n  // If we had to trim any garbage, we'll store it here\n  const trimmed = get(sliced, 'trimmed', '')\n\n  const errors = get( response, 'data.errors', null )\n\n  if ( response.status >= 400 ) {\n    if ( errors ) {\n      // This is just a normal error response.\n      response.uiMessage = reportRequestError({ error: response.data, confirmed, trimmed })\n    } else {\n      // This error response has a bad schema\n      response.uiMessage = reportRequestError({ error: null, confirmed, trimmed })\n    }\n    return response\n  }\n\n  /**\n   * We don't normally expect 3XX responses, but we'll just let it pass\n   * through, unless we can see that the response has been corrupted,\n   * in which case we'll report that first.\n   */\n  if ( response.status < 400 && response.status >= 300 ) {\n    if ( !confirmed || '' !== trimmed ) {\n      response.uiMessage = reportRequestError({ error: null, confirmed, trimmed })\n    }\n\n    return response\n  }\n\n  /**\n   * If we make it this far, then we have a 2XX response with some valid data,\n   * which we maybe had to fix up.\n   *\n   * Now we need to detect whether it contains any errors to identify false positives,\n   * or cases where its legitmate for the controller to return an otherwise\n   * successful response that also includes some error data for extra diagnostics.\n   */\n  if ( errors ) {\n    /** \n     * The controller sent back _only_ error data, though the HTTP status is 2XX.\n     * This is a false positive.\n     * This can occur when other buggy code running on the WordPress server preempts\n     * and undermines the proper sending of HTTP headers, and yet the controller\n     * still sends its otherwise-valid JSON error response.\n     */\n    const falsePositive = true\n    response.falsePositive = true\n    response.uiMessage = reportRequestError({ error: response.data, confirmed, falsePositive, trimmed })\n    return response\n  } else {\n    const error = get( response, 'data.error', null )\n\n    if( error ) {\n      /**\n       * We may receive errors back with a 200 success response, such as when\n       * the controller catches PreferenceRegistrationExceptions.\n       */\n      response.uiMessage = reportRequestError({ error, ok: true, confirmed, trimmed })\n      return response\n    }\n\n    if( !confirmed ) {\n      /**\n       * We have received a response that, by every indication so far, is successful.\n       * However, it lacks the confirmation header, which _might_ indicate a problem.\n       */\n      response.uiMessage = reportRequestError({ error: null, ok: true, confirmed, trimmed })\n    }\n    return response\n  }\n}\n\nrestApiAxios.interceptors.response.use(\n  response => preprocessResponse( response ),\n  error => {\n    if( error.response ) {\n      error.response = preprocessResponse( error.response )\n      error.uiMessage = get(error, 'response.uiMessage')\n    } else if ( error.request ) {\n      const code = 'fontawesome_request_noresponse'\n      const e = {\n        errors: {\n          [code]: [ NO_RESPONSE_MESSAGE ]\n        },\n        error_data: {\n          [code]: { request: error.request }\n        }\n      }\n\n      error.uiMessage = reportRequestError({ error: e })\n    } else {\n      const code = 'fontawesome_request_failed'\n      const e = {\n        errors: {\n          [code]: [ REQUEST_FAILED_MESSAGE ]\n        },\n        error_data: {\n          [code]: { failedRequestMessage: error.message }\n        }\n      }\n\n      error.uiMessage = reportRequestError({ error: e })\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nexport function resetPendingOptions() {\n  return {\n    type: 'RESET_PENDING_OPTIONS'\n  }\n}\n\nexport function resetOptionsFormState() {\n  return {\n    type: 'OPTIONS_FORM_STATE_RESET'\n  }\n}\n\nexport function addPendingOption(change) {\n  return function(dispatch, getState) {\n    const { options } = getState()\n\n    for (const [ key, val ] of toPairs(change)) {\n      const originalValue = options[key]\n\n      // If we're changing back to an original setting\n      if( originalValue === val ) {\n        dispatch({\n          type: 'RESET_PENDING_OPTION',\n          change: {[key]: val}\n        })\n      } else {\n        dispatch({\n          type: 'ADD_PENDING_OPTION',\n          change: {[key]: val}\n        })\n      }\n    }\n  }\n}\n\nexport function updatePendingUnregisteredClientsForDeletion(data = []) {\n  return {\n    type: 'UPDATE_PENDING_UNREGISTERED_CLIENTS_FOR_DELETION',\n    data\n  }\n}\n\nexport function resetUnregisteredClientsDeletionStatus() {\n  return {\n    type: 'DELETE_UNREGISTERED_CLIENTS_RESET'\n  }\n}\n\nexport function resetPendingBlocklistSubmissionStatus() {\n  return {\n    type: 'BLOCKLIST_UPDATE_RESET'\n  }\n}\n\nexport function submitPendingUnregisteredClientDeletions() {\n  return function(dispatch, getState){\n    const { apiNonce, apiUrl, unregisteredClientsDeletionStatus } = getState()\n    const deleteList = get( unregisteredClientsDeletionStatus, 'pending', null )\n\n    if (!deleteList || size( deleteList ) === 0) return\n\n    dispatch({ type: 'DELETE_UNREGISTERED_CLIENTS_START' })\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'DELETE_UNREGISTERED_CLIENTS_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n      })\n    }\n\n    return restApiAxios.delete(\n      `${apiUrl}/conflict-detection/conflicts`,\n      {\n        data: deleteList,\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { status, data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'DELETE_UNREGISTERED_CLIENTS_END',\n          success: true,\n          data: 204 === status ? null : data,\n          message: ''\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function updatePendingBlocklist(data = []) {\n  return {\n    type: 'UPDATE_PENDING_BLOCKLIST',\n    data\n  }\n}\n\nexport function submitPendingBlocklist() {\n  return function(dispatch, getState){\n    const { apiNonce, apiUrl, blocklistUpdateStatus } = getState()\n    const blocklist = get( blocklistUpdateStatus, 'pending', null )\n\n    if (!blocklist) return\n\n    dispatch({type: 'BLOCKLIST_UPDATE_START'})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'BLOCKLIST_UPDATE_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/conflict-detection/conflicts/blocklist`,\n      blocklist,\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { status, data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'BLOCKLIST_UPDATE_END',\n          success: true,\n          data: 204 === status ? null : data,\n          message: ''\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function checkPreferenceConflicts() {\n  return function(dispatch, getState){\n    dispatch({type: 'PREFERENCE_CHECK_START'})\n    const { apiNonce, apiUrl, options, pendingOptions } = getState()\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'PREFERENCE_CHECK_END',\n        success: false,\n        message: uiMessage || COULD_NOT_CHECK_PREFERENCES_MESSAGE\n      })\n    }\n\n    return restApiAxios.post(\n      `${apiUrl}/preference-check`,\n      { ...options, ...pendingOptions },\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { data, falsePositive } = response\n\n      if( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'PREFERENCE_CHECK_END',\n          success: true,\n          message: '',\n          detectedConflicts: data\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function chooseAwayFromKitConfig({ activeKitToken }) {\n  return function(dispatch, getState) {\n    const { releases } = getState()\n\n    dispatch({\n      type: 'CHOOSE_AWAY_FROM_KIT_CONFIG',\n      activeKitToken,\n      concreteVersion: get(releases, 'latest_version')\n    })\n  }\n}\n\nexport function chooseIntoKitConfig() {\n  return { type: 'CHOOSE_INTO_KIT_CONFIG' }\n}\n\nexport function queryKits() {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl, options } = getState()\n\n    const initialKitToken = get(options, 'kitToken', null)\n\n    dispatch({ type: 'KITS_QUERY_START' })\n\n    const handleKitsQueryError = ({ uiMessage }) => {\n      dispatch({\n        type: 'KITS_QUERY_END',\n        success: false,\n        message: uiMessage || __( 'Failed to fetch kits', 'font-awesome' )\n      })\n    }\n\n    const handleKitUpdateError = ({ uiMessage }) => {\n      dispatch({\n        type: 'OPTIONS_FORM_SUBMIT_END',\n        success: false,\n        message: uiMessage || __( 'Couldn\\'t update latest kit settings', 'font-awesome' )\n      })\n    }\n\n    return restApiAxios.post(\n      `${apiUrl}/api`,\n      `query {\n        me {\n          kits {\n            name\n            version\n            technologySelected\n            licenseSelected\n            minified\n            token\n            shimEnabled\n            autoAccessibilityEnabled\n            status\n          }\n        }\n      }`,\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      if ( response.falsePositive ) return handleKitsQueryError(response)\n\n      const data = get(response, 'data.data')\n\n      // We may receive errors back with a 200 response, such as when\n      // there PreferenceRegistrationExceptions.\n      if( get( data, 'me') ) {\n        dispatch({\n          type: 'KITS_QUERY_END',\n          data,\n          success: true\n        })\n      } else {\n        return dispatch({\n          type: 'KITS_QUERY_END',\n          success: false,\n          message: __( 'Failed to fetch kits. Regenerate your API Token and try again.', 'font-awesome' )\n        })\n      }\n\n      // If we didn't start out with a saved kitToken, we're done.\n      // Otherwise, we'll move on to update any config on that kit which\n      // might have changed since we saved it in WordPress.\n      if(! initialKitToken) return\n\n      const refreshedKits = get( data, 'me.kits', [] )\n      const currentKitRefreshed = find( refreshedKits, { token: initialKitToken } )\n\n      if(! currentKitRefreshed) return\n\n      const optionsUpdate = {}\n\n      // Inspect each relevant kit option for the current kit to see if it's\n      // been changed since our last query.\n      if( options.usePro && currentKitRefreshed.licenseSelected !== 'pro' ) {\n        optionsUpdate.usePro = false\n      } else if ( !options.usePro && currentKitRefreshed.licenseSelected === 'pro' ) {\n        optionsUpdate.usePro = true\n      }\n\n      if( options.technology === 'svg' && currentKitRefreshed.technologySelected !== 'svg' ) {\n        optionsUpdate.technology = 'webfont'\n        // pseudoElements must always be true for webfont\n        optionsUpdate.pseudoElements = true\n      } else if( options.technology !== 'svg' && currentKitRefreshed.technologySelected === 'svg' ) {\n        optionsUpdate.technology = 'svg'\n        // pseudoElements must always be false for svg when loaded in a kit\n        optionsUpdate.pseudoElements = false\n      }\n\n      if( options.version !== currentKitRefreshed.version) {\n        optionsUpdate.version = currentKitRefreshed.version\n      }\n\n      if( options.v4Compat && !currentKitRefreshed.shimEnabled ) {\n        optionsUpdate.v4Compat = false\n      } else if( !options.v4Compat && currentKitRefreshed.shimEnabled ) {\n        optionsUpdate.v4Compat = true\n      }\n\n      dispatch({type: 'OPTIONS_FORM_SUBMIT_START'})\n\n      return restApiAxios.put(\n        `${apiUrl}/config`,\n        { \n          options: {\n            ...options, ...optionsUpdate\n          }\n        },\n        {\n          headers: {\n            'X-WP-Nonce': apiNonce\n          }\n        }\n      ).then(response => {\n        const { data, falsePositive } = response\n\n        if ( falsePositive ) return handleKitUpdateError(response)\n\n        dispatch({\n          type: 'OPTIONS_FORM_SUBMIT_END',\n          data,\n          success: true,\n          message: __( 'Kit changes saved', 'font-awesome' )\n        })\n      }).catch(handleKitUpdateError)\n    }).catch(handleKitsQueryError)\n  }\n}\n\nexport function submitPendingOptions() {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl, options, pendingOptions } = getState()\n\n    dispatch({type: 'OPTIONS_FORM_SUBMIT_START'})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'OPTIONS_FORM_SUBMIT_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE \n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/config`,\n      { options: { ...options, ...pendingOptions }},\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'OPTIONS_FORM_SUBMIT_END',\n          data,\n          success: true,\n          message: __( 'Changes saved', 'font-awesome' )\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function updateApiToken({ apiToken = false, runQueryKits = false }) {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl, options } = getState()\n\n    dispatch({type: 'OPTIONS_FORM_SUBMIT_START'})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'OPTIONS_FORM_SUBMIT_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/config`,\n      { options: { ...options, apiToken }},\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'OPTIONS_FORM_SUBMIT_END',\n          data,\n          success: true,\n          message: __( 'API Token saved', 'font-awesome' )\n        })\n\n        if( runQueryKits ) {\n          return dispatch(queryKits())\n        }\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function userAttemptToStopScanner() {\n  return {\n    type: 'USER_STOP_SCANNER'\n  }\n}\n\nexport function reportDetectedConflicts({ nodesTested = {} }) {\n  return (dispatch, getState) => {\n    const { apiNonce, apiUrl, unregisteredClients, showConflictDetectionReporter } = getState()\n\n    // This should be a noop if by the time we get here the conflict detection reporter\n    // is already gone. That would indicate that the user stopped the scanner before\n    // the current page's scan was complete and report submitted. In that case,\n    // we just ignore the report. Otherwise, this action would try to post results\n    // to a REST route that will no longer be registered and listening, resulting a 404.\n    if( !showConflictDetectionReporter ) {\n      return\n    }\n\n    if( size(nodesTested.conflict) > 0 ) {\n      const payload = Object.keys(nodesTested.conflict).reduce(function(acc, md5){\n        acc[md5] = nodesTested.conflict[md5]\n        return acc\n      }, {})\n\n      dispatch({\n        type: 'CONFLICT_DETECTION_SUBMIT_START',\n        unregisteredClientsBeforeDetection: unregisteredClients,\n        recentConflictsDetected: nodesTested.conflict\n      })\n\n      const handleError = ({ uiMessage }) => {\n        dispatch({\n          type: 'CONFLICT_DETECTION_SUBMIT_END',\n          success: false,\n          message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n        })\n      }\n\n      return restApiAxios.post(\n        `${apiUrl}/conflict-detection/conflicts`,\n        payload,\n        {\n          headers: {\n            'X-WP-Nonce': apiNonce\n          }\n        }\n      )\n      .then(response => {\n        const { status, data, falsePositive } = response\n\n        if ( falsePositive ) {\n          handleError(response)\n        } else {\n          dispatch({\n            type: 'CONFLICT_DETECTION_SUBMIT_END',\n            success: true,\n            /**\n             * If get back no data here, that can only mean that a previous\n             * response with garbage in it had an erroneous HTTP 200 status\n             * on it, but no parseable JSON, which is equivalent to a 204.\n             */\n            data: ( 204 === status || 0 === size(data) ) ? null : data\n          })\n        }\n      })\n      .catch(handleError)\n    } else {\n      dispatch({ type: 'CONFLICT_DETECTION_NONE_FOUND' })\n    }\n  }\n}\n\nexport function snoozeV3DeprecationWarning() {\n  return (dispatch, getState) => {\n    const { apiNonce, apiUrl } = getState()\n\n    dispatch({ type: 'SNOOZE_V3DEPRECATION_WARNING_START' })\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'SNOOZE_V3DEPRECATION_WARNING_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SNOOZE_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/v3deprecation`,\n      { snooze: true },\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    )\n    .then(response => {\n      const { falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'SNOOZE_V3DEPRECATION_WARNING_END',\n          success: true,\n          snooze: true,\n          message: ''\n        })\n      }\n    })\n    .catch(handleError)\n  }\n}\n\nexport function setActiveAdminTab(tab) {\n  return {\n    type: 'SET_ACTIVE_ADMIN_TAB',\n    tab\n  }\n}\n\nexport function setConflictDetectionScanner({ enable = true }) {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl } = getState()\n\n    const actionStartType = enable\n      ? 'ENABLE_CONFLICT_DETECTION_SCANNER_START'\n      : 'DISABLE_CONFLICT_DETECTION_SCANNER_START'\n\n    const actionEndType = enable\n      ? 'ENABLE_CONFLICT_DETECTION_SCANNER_END'\n      : 'DISABLE_CONFLICT_DETECTION_SCANNER_END'\n\n    dispatch({type: actionStartType})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: actionEndType,\n        success: false,\n        message: uiMessage || COULD_NOT_START_SCANNER_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/conflict-detection/until`,\n      enable\n        ? Math.floor((new Date((new Date()).valueOf() + (CONFLICT_DETECTION_SCANNER_DURATION_MIN * 1000 * 60))) / 1000)\n        : Math.floor((new Date())/1000) - CONFLICT_DETECTION_SCANNER_DEACTIVATION_DELTA_MS,\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { status, data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: actionEndType,\n          data: 204 === status ? null : data,\n          success: true\n        })\n      }\n    }).catch(handleError)\n  }\n}\n","import get from 'lodash/get'\nimport size from 'lodash/size'\nimport { __ } from '@wordpress/i18n'\n\nexport const ERROR_REPORT_PREAMBLE = __( 'Font Awesome WordPress Plugin Error Report', 'font-awesome' )\nconst UI_MESSAGE_DEFAULT = __( 'D\\'oh! That failed big time.', 'font-awesome' )\nconst ERROR_REPORTING_ERROR = __( 'There was an error attempting to report the error.', 'font-awesome' )\nconst REST_NO_ROUTE_ERROR = __( 'Oh no! Your web browser could not reach your WordPress server.', 'font-awesome' )\nconst REST_COOKIE_INVALID_NONCE_ERROR = __( 'It looks like your web browser session expired. Try logging out and log back in to WordPress admin.', 'font-awesome' )\nconst OK_ERROR_PREAMBLE = __( 'The last request was successful, but it also returned the following error(s), which might be helpful for troubleshooting.', 'font-awesome' )\nconst ONE_OF_MANY_ERRORS_GROUP_LABEL = __( 'Error', 'font-awesome' )\nconst FALSE_POSITIVE_MESSAGE = __( 'WARNING: The last request contained errors, though your WordPress server reported it as a success. This usually means there\\'s a problem with your theme or one of your other plugins emitting output that is causing problems.', 'font-awesome' )\nconst UNCONFIRMED_RESPONSE_MESSAGE = __( 'WARNING: The last response from your WordPress server did not include the confirmation header that should be in all valid Font Awesome responses. This is a clue that some code from another theme or plugin is acting badly and causing the wrong headers to be sent.', 'font-awesome')\nconst TRIMMED_RESPONSE_PREAMBLE = __( 'WARNING: Invalid Data Trimmed from Server Response', 'font-awesome' )\nconst EXPECTED_EMPTY_MESSAGE = __( 'WARNING: We expected the last response from the server to contain no data, but it contained something unexpected.', 'font-awesome' )\nconst MISSING_ERROR_DATA_MESSAGE = __( 'Your WordPress server returned an error for that last request, but there was no information about the error.', 'font-awesome' )\n\n/**\n * This both sends appropriately formatted output to the console via console.info,\n * and returns a uiMessage that would be appropriate to display to an admin user.\n */\nfunction handleSingleWpErrorOutput( wpError ) {\n  if( ! get(wpError, 'code') ) {\n    console.info(ERROR_REPORTING_ERROR)\n    return UI_MESSAGE_DEFAULT\n  }\n\n  let uiMessage = null\n  let output = ''\n\n  const message = get(wpError, 'message')\n  if(message) {\n    output = output.concat(`message: ${message}\\n`)\n    uiMessage = message\n  }\n\n  const code = get(wpError, 'code')\n  if(code) {\n    output = output.concat(`code: ${code}\\n`)\n\n    switch(code) {\n      case 'rest_no_route':\n        uiMessage = REST_NO_ROUTE_ERROR\n        break\n      case 'rest_cookie_invalid_nonce':\n        uiMessage = REST_COOKIE_INVALID_NONCE_ERROR\n        break\n      case 'fontawesome_unknown_error':\n        uiMessage = UI_MESSAGE_DEFAULT\n        break\n      default:\n    }\n  }\n\n  const data = get(wpError, 'data')\n\n  if ( 'string' === typeof data ) {\n    output = output.concat(`data: ${data}\\n`)\n  } else {\n    const status = get(wpError, 'data.status')\n    if(status) output = output.concat(`status: ${status}\\n`)\n\n    const trace = get(wpError, 'data.trace')\n    if(trace) output = output.concat(`trace:\\n${trace}\\n`)\n  }\n\n  if( output && '' !== output ) {\n    console.info(output)\n  } else {\n    console.info(wpError)\n  }\n\n  const request = get(wpError, 'data.request')\n  if(request) {\n    console.info(request)\n  }\n\n  const failedRequestMessage = get(wpError, 'data.failedRequestMessage')\n\n  if(failedRequestMessage) {\n    console.info(failedRequestMessage)\n  }\n\n  return uiMessage\n}\n\nfunction handleAllWpErrorOutput(errorData) {\n  const wpErrors = Object.keys(errorData.errors || []).map(code => {\n    // get the first error message available for this code\n    const message = get(errorData, `errors.${code}.0`)\n    const data = get(errorData, `error_data.${code}`)\n\n    return {\n      code,\n      message,\n      data\n    }\n  })\n\n  if(0 === size(wpErrors)) {\n    wpErrors.push({\n      code: 'fontawesome_unknown_error',\n      message: ERROR_REPORTING_ERROR\n    })\n  }\n\n  const uiMessage = wpErrors.reduce((acc, error) => {\n    console.group(ONE_OF_MANY_ERRORS_GROUP_LABEL)\n\n    const msg = handleSingleWpErrorOutput( error )\n\n    console.groupEnd()\n\n    // The uiMessage we should return will be the first error message that isn't\n    // from a 'previous_exception'\n    return (!acc && error.code !== 'previous_exception')\n      ? msg\n      : acc\n  }, null)\n\n  return uiMessage\n}\n\nfunction report(params) {\n  const {\n    error,\n    ok = false,\n    falsePositive = false,\n    confirmed = true,\n    expectEmpty = false,\n    trimmed = ''\n  } = params\n\n  console.group(ERROR_REPORT_PREAMBLE)\n\n  if( ok ) {\n    console.info(OK_ERROR_PREAMBLE)\n  }\n\n  if( falsePositive ) {\n    console.info(FALSE_POSITIVE_MESSAGE)\n  }\n\n  if( ! confirmed ) {\n    console.info(UNCONFIRMED_RESPONSE_MESSAGE)\n  }\n\n  if( '' !== trimmed ) {\n    console.group(TRIMMED_RESPONSE_PREAMBLE)\n    if( expectEmpty ) {\n      console.info(EXPECTED_EMPTY_MESSAGE)\n    }\n    console.info(trimmed)\n    console.groupEnd()\n  }\n\n  const uiMessage = null !== error\n    ? handleAllWpErrorOutput( error )\n    : null\n\n  if ( null === error && trimmed === '' && confirmed ) {\n    console.info(MISSING_ERROR_DATA_MESSAGE)\n  }\n\n  console.groupEnd()\n\n  return uiMessage\n}\n\nexport default report\n","function findJson( content, start = 0 ) {\n  let parsed = null\n  let nextStart = null\n\n  if ( 'string' !== typeof content ) return null\n  if ( start >= content.length ) return null\n\n  try {\n    parsed = JSON.parse( content.slice(start) )\n    return {\n      start,\n      parsed\n    }\n  } catch( _e ) {\n    // search for the next character that would begin a JSON response\n    const nextLeftBracket = content.indexOf('[', start + 1)\n    const nextLeftBrace = content.indexOf('{', start + 1)\n\n    if( -1 === nextLeftBracket && -1 === nextLeftBrace ) {\n      // we've search to the end and found no chars that would start JSON content\n      return null\n    } else {\n      if ( -1 !== nextLeftBracket && -1 !== nextLeftBrace ) {\n        // if we found both, take the lower one\n        nextStart = nextLeftBracket < nextLeftBrace\n          ? nextLeftBracket\n          : nextLeftBrace\n      } else if ( -1 !== nextLeftBrace ) {\n        nextStart = nextLeftBrace\n      } else {\n        nextStart = nextLeftBracket\n      }\n    }\n  }\n\n  if ( null === nextStart ) {\n    return null\n  } else {\n    return findJson( content, nextStart )\n  }\n}\n\n/**\n * Searches through the given content trying to skip over any non-JSON string\n * data to find JSON data.\n * \n * Returns null if none found.\n * \n * Otherwise, returns an object indicating the starting index for the found JSON,\n * the json content as an unparsed string, the non-json content trimmed from the\n * beginning, and the parsed JSON.\n */\nfunction sliceJson( content ) {\n  if(! content || '' === content ) return null\n\n  const result = findJson( content )\n\n  if ( null === result ) {\n    return null\n  } else {\n    const { start, parsed } = result\n\n    return {\n      start,\n      json: content.slice(start),\n      trimmed: content.slice(0, start),\n      parsed\n    }\n  }\n}\n\nexport default sliceJson\n"],"sourceRoot":""}