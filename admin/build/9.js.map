{"version":3,"sources":["webpack:///./src/store/actions.js","webpack:///./src/util/reportRequestError.js","webpack:///./src/util/sliceJson.js"],"names":["restApiAxios","axios","CONFLICT_DETECTION_SCANNER_DURATION_MIN","CONFLICT_DETECTION_SCANNER_DEACTIVATION_DELTA_MS","COULD_NOT_SAVE_CHANGES_MESSAGE","__","COULD_NOT_CHECK_PREFERENCES_MESSAGE","NO_RESPONSE_MESSAGE","REQUEST_FAILED_MESSAGE","COULD_NOT_START_SCANNER_MESSAGE","COULD_NOT_SNOOZE_MESSAGE","confirmed","has","response","reportRequestError","error","trimmed","expectEmpty","data","get","foundUnexpectedData","size","sliced","sliceJson","errors","falsePositive","ok","preprocessResponse","code","e","error_data","request","failedRequestMessage","message","Promise","type","options","getState","toPairs","originalValue","dispatch","change","val","unregisteredClientsDeletionStatus","deleteList","handleError","uiMessage","success","apiUrl","headers","apiNonce","blocklistUpdateStatus","blocklist","pendingOptions","detectedConflicts","activeKitToken","releases","concreteVersion","initialKitToken","handleKitsQueryError","handleKitUpdateError","refreshedKits","currentKitRefreshed","find","token","optionsUpdate","apiToken","runQueryKits","queryKits","nodesTested","showConflictDetectionReporter","payload","acc","unregisteredClientsBeforeDetection","recentConflictsDetected","conflict","snooze","tab","enable","actionStartType","actionEndType","Math","ERROR_REPORT_PREAMBLE","UI_MESSAGE_DEFAULT","ERROR_REPORTING_ERROR","REST_NO_ROUTE_ERROR","REST_COOKIE_INVALID_NONCE_ERROR","OK_ERROR_PREAMBLE","ONE_OF_MANY_ERRORS_GROUP_LABEL","FALSE_POSITIVE_MESSAGE","UNCONFIRMED_RESPONSE_MESSAGE","TRIMMED_RESPONSE_PREAMBLE","EXPECTED_EMPTY_MESSAGE","MISSING_ERROR_DATA_MESSAGE","console","output","status","trace","wpErrors","errorData","msg","handleSingleWpErrorOutput","handleAllWpErrorOutput","start","parsed","nextStart","content","JSON","nextLeftBracket","nextLeftBrace","findJson","result","json"],"mappings":"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","file":"9.js","sourcesContent":["import axios from 'axios'\nimport toPairs from 'lodash/toPairs'\nimport size from 'lodash/size'\nimport get from 'lodash/get'\nimport find from 'lodash/find'\nimport reportRequestError from '../util/reportRequestError'\nimport { __ } from '@wordpress/i18n'\nimport has from 'lodash/has'\nimport sliceJson from '../util/sliceJson'\n\nconst restApiAxios = axios.create()\n\n// How far into the future from \"now\" until the conflict detection scanner\n// will be enabled.\nexport const CONFLICT_DETECTION_SCANNER_DURATION_MIN = 10\n\n// How far in the past to set detectConflictsUntil when the conflict detection\n// scanner is being disabled. We can use a non-zero but negligible value in\n// order to protect against possible race conditions, instead of 0\n// (which would just be exactly \"now\").\nconst CONFLICT_DETECTION_SCANNER_DEACTIVATION_DELTA_MS = 1\n\nconst COULD_NOT_SAVE_CHANGES_MESSAGE = __( 'Couldn\\'t save those changes', 'font-awesome' )\nconst COULD_NOT_CHECK_PREFERENCES_MESSAGE = __( 'Couldn\\'t check preferences', 'font-awesome' )\nconst NO_RESPONSE_MESSAGE = __( 'A request to your WordPress server never received a response', 'font-awesome' )\nconst REQUEST_FAILED_MESSAGE = __( 'A request to your WordPress server failed', 'font-awesome' )\nconst COULD_NOT_START_SCANNER_MESSAGE = __( 'Couldn\\'t start the scanner', 'font-awesome' )\nconst COULD_NOT_SNOOZE_MESSAGE = __( 'Couldn\\'t snooze', 'font-awesome' )\n \nfunction preprocessResponse( response ) {\n  const confirmed = has( response, 'headers.fontawesome-confirmation' )\n\n  if ( 204 === response.status && '' !== response.data ) {\n      reportRequestError({ error: null, confirmed, trimmed: response.data, expectEmpty: true })\n      // clean it up\n      response.data = {}\n      return response\n  } \n\n  const data = get(response, 'data', null)\n\n  const foundUnexpectedData = 'string' === typeof data && size(data) > 0\n\n  const sliced = foundUnexpectedData\n    ? sliceJson( data )\n    : {}\n  \n  // Fixup the response data if garbage was fixed\n  if ( foundUnexpectedData) {\n    if ( null === sliced ) {\n      reportRequestError({ error: null, confirmed, trimmed: data })\n      // clean it up\n      response.data = {}\n      return response\n    } else {\n      response.data = get(sliced, 'parsed')\n    }\n  }\n\n  // If we had to trim any garbage, we'll store it here\n  const trimmed = get(sliced, 'trimmed', '')\n\n  const errors = get( response, 'data.errors', null )\n\n  if ( response.status >= 400 ) {\n    if ( errors ) {\n      // This is just a normal error response.\n      response.uiMessage = reportRequestError({ error: response.data, confirmed, trimmed })\n    } else {\n      // This error response has a bad schema\n      response.uiMessage = reportRequestError({ error: null, confirmed, trimmed })\n    }\n    return response\n  }\n\n  /**\n   * We don't normally expect 3XX responses, but we'll just let it pass\n   * through, unless we can see that the response has been corrupted,\n   * in which case we'll report that first.\n   */\n  if ( response.status < 400 && response.status >= 300 ) {\n    if ( !confirmed || '' !== trimmed ) {\n      response.uiMessage = reportRequestError({ error: null, confirmed, trimmed })\n    }\n\n    return response\n  }\n\n  /**\n   * If we make it this far, then we have a 2XX response with some valid data,\n   * which we maybe had to fix up.\n   *\n   * Now we need to detect whether it contains any errors to identify false positives,\n   * or cases where its legitmate for the controller to return an otherwise\n   * successful response that also includes some error data for extra diagnostics.\n   */\n  if ( errors ) {\n    /** \n     * The controller sent back _only_ error data, though the HTTP status is 2XX.\n     * This is a false positive.\n     * This can occur when other buggy code running on the WordPress server preempts\n     * and undermines the proper sending of HTTP headers, and yet the controller\n     * still sends its otherwise-valid JSON error response.\n     */\n    const falsePositive = true\n    response.falsePositive = true\n    response.uiMessage = reportRequestError({ error: response.data, confirmed, falsePositive, trimmed })\n    return response\n  } else {\n    const error = get( response, 'data.error', null )\n\n    if( error ) {\n      /**\n       * We may receive errors back with a 200 success response, such as when\n       * the controller catches PreferenceRegistrationExceptions.\n       */\n      response.uiMessage = reportRequestError({ error, ok: true, confirmed, trimmed })\n      return response\n    }\n\n    if( !confirmed ) {\n      /**\n       * We have received a response that, by every indication so far, is successful.\n       * However, it lacks the confirmation header, which _might_ indicate a problem.\n       */\n      response.uiMessage = reportRequestError({ error: null, ok: true, confirmed, trimmed })\n    }\n    return response\n  }\n}\n\nrestApiAxios.interceptors.response.use(\n  response => preprocessResponse( response ),\n  error => {\n    if( error.response ) {\n      error.response = preprocessResponse( error.response )\n      error.uiMessage = get(error, 'response.uiMessage')\n    } else if ( error.request ) {\n      const code = 'fontawesome_request_noresponse'\n      const e = {\n        errors: {\n          [code]: [ NO_RESPONSE_MESSAGE ]\n        },\n        error_data: {\n          [code]: { request: error.request }\n        }\n      }\n\n      error.uiMessage = reportRequestError({ error: e })\n    } else {\n      const code = 'fontawesome_request_failed'\n      const e = {\n        errors: {\n          [code]: [ REQUEST_FAILED_MESSAGE ]\n        },\n        error_data: {\n          [code]: { failedRequestMessage: error.message }\n        }\n      }\n\n      error.uiMessage = reportRequestError({ error: e })\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nexport function resetPendingOptions() {\n  return {\n    type: 'RESET_PENDING_OPTIONS'\n  }\n}\n\nexport function resetOptionsFormState() {\n  return {\n    type: 'OPTIONS_FORM_STATE_RESET'\n  }\n}\n\nexport function addPendingOption(change) {\n  return function(dispatch, getState) {\n    const { options } = getState()\n\n    for (const [ key, val ] of toPairs(change)) {\n      const originalValue = options[key]\n\n      // If we're changing back to an original setting\n      if( originalValue === val ) {\n        dispatch({\n          type: 'RESET_PENDING_OPTION',\n          change: {[key]: val}\n        })\n      } else {\n        dispatch({\n          type: 'ADD_PENDING_OPTION',\n          change: {[key]: val}\n        })\n      }\n    }\n  }\n}\n\nexport function updatePendingUnregisteredClientsForDeletion(data = []) {\n  return {\n    type: 'UPDATE_PENDING_UNREGISTERED_CLIENTS_FOR_DELETION',\n    data\n  }\n}\n\nexport function resetUnregisteredClientsDeletionStatus() {\n  return {\n    type: 'DELETE_UNREGISTERED_CLIENTS_RESET'\n  }\n}\n\nexport function resetPendingBlocklistSubmissionStatus() {\n  return {\n    type: 'BLOCKLIST_UPDATE_RESET'\n  }\n}\n\nexport function submitPendingUnregisteredClientDeletions() {\n  return function(dispatch, getState){\n    const { apiNonce, apiUrl, unregisteredClientsDeletionStatus } = getState()\n    const deleteList = get( unregisteredClientsDeletionStatus, 'pending', null )\n\n    if (!deleteList || size( deleteList ) === 0) return\n\n    dispatch({ type: 'DELETE_UNREGISTERED_CLIENTS_START' })\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'DELETE_UNREGISTERED_CLIENTS_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n      })\n    }\n\n    return restApiAxios.delete(\n      `${apiUrl}/conflict-detection/conflicts`,\n      {\n        data: deleteList,\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { status, data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'DELETE_UNREGISTERED_CLIENTS_END',\n          success: true,\n          data: 204 === status ? null : data,\n          message: ''\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function updatePendingBlocklist(data = []) {\n  return {\n    type: 'UPDATE_PENDING_BLOCKLIST',\n    data\n  }\n}\n\nexport function submitPendingBlocklist() {\n  return function(dispatch, getState){\n    const { apiNonce, apiUrl, blocklistUpdateStatus } = getState()\n    const blocklist = get( blocklistUpdateStatus, 'pending', null )\n\n    if (!blocklist) return\n\n    dispatch({type: 'BLOCKLIST_UPDATE_START'})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'BLOCKLIST_UPDATE_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/conflict-detection/conflicts/blocklist`,\n      blocklist,\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { status, data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'BLOCKLIST_UPDATE_END',\n          success: true,\n          data: 204 === status ? null : data,\n          message: ''\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function checkPreferenceConflicts() {\n  return function(dispatch, getState){\n    dispatch({type: 'PREFERENCE_CHECK_START'})\n    const { apiNonce, apiUrl, options, pendingOptions } = getState()\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'PREFERENCE_CHECK_END',\n        success: false,\n        message: uiMessage || COULD_NOT_CHECK_PREFERENCES_MESSAGE\n      })\n    }\n\n    return restApiAxios.post(\n      `${apiUrl}/preference-check`,\n      { ...options, ...pendingOptions },\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { data, falsePositive } = response\n\n      if( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'PREFERENCE_CHECK_END',\n          success: true,\n          message: '',\n          detectedConflicts: data\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function chooseAwayFromKitConfig({ activeKitToken }) {\n  return function(dispatch, getState) {\n    const { releases } = getState()\n\n    dispatch({\n      type: 'CHOOSE_AWAY_FROM_KIT_CONFIG',\n      activeKitToken,\n      concreteVersion: get(releases, 'latest_version')\n    })\n  }\n}\n\nexport function chooseIntoKitConfig() {\n  return { type: 'CHOOSE_INTO_KIT_CONFIG' }\n}\n\nexport function queryKits() {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl, options } = getState()\n\n    const initialKitToken = get(options, 'kitToken', null)\n\n    dispatch({ type: 'KITS_QUERY_START' })\n\n    const handleKitsQueryError = ({ uiMessage }) => {\n      dispatch({\n        type: 'KITS_QUERY_END',\n        success: false,\n        message: uiMessage || __( 'Failed to fetch kits', 'font-awesome' )\n      })\n    }\n\n    const handleKitUpdateError = ({ uiMessage }) => {\n      dispatch({\n        type: 'OPTIONS_FORM_SUBMIT_END',\n        success: false,\n        message: uiMessage || __( 'Couldn\\'t update latest kit settings', 'font-awesome' )\n      })\n    }\n\n    return restApiAxios.post(\n      `${apiUrl}/api`,\n      `query {\n        me {\n          kits {\n            name\n            version\n            technologySelected\n            licenseSelected\n            minified\n            token\n            shimEnabled\n            autoAccessibilityEnabled\n            status\n          }\n        }\n      }`,\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      if ( response.falsePositive ) return handleKitsQueryError(response)\n\n      const data = get(response, 'data.data')\n\n      // We may receive errors back with a 200 response, such as when\n      // there PreferenceRegistrationExceptions.\n      if( get( data, 'me') ) {\n        dispatch({\n          type: 'KITS_QUERY_END',\n          data,\n          success: true\n        })\n      } else {\n        return dispatch({\n          type: 'KITS_QUERY_END',\n          success: false,\n          message: __( 'Failed to fetch kits. Regenerate your API Token and try again.', 'font-awesome' )\n        })\n      }\n\n      // If we didn't start out with a saved kitToken, we're done.\n      // Otherwise, we'll move on to update any config on that kit which\n      // might have changed since we saved it in WordPress.\n      if(! initialKitToken) return\n\n      const refreshedKits = get( data, 'me.kits', [] )\n      const currentKitRefreshed = find( refreshedKits, { token: initialKitToken } )\n\n      if(! currentKitRefreshed) return\n\n      const optionsUpdate = {}\n\n      // Inspect each relevant kit option for the current kit to see if it's\n      // been changed since our last query.\n      if( options.usePro && currentKitRefreshed.licenseSelected !== 'pro' ) {\n        optionsUpdate.usePro = false\n      } else if ( !options.usePro && currentKitRefreshed.licenseSelected === 'pro' ) {\n        optionsUpdate.usePro = true\n      }\n\n      if( options.technology === 'svg' && currentKitRefreshed.technologySelected !== 'svg' ) {\n        optionsUpdate.technology = 'webfont'\n        // pseudoElements must always be true for webfont\n        optionsUpdate.pseudoElements = true\n      } else if( options.technology !== 'svg' && currentKitRefreshed.technologySelected === 'svg' ) {\n        optionsUpdate.technology = 'svg'\n        // pseudoElements must always be false for svg when loaded in a kit\n        optionsUpdate.pseudoElements = false\n      }\n\n      if( options.version !== currentKitRefreshed.version) {\n        optionsUpdate.version = currentKitRefreshed.version\n      }\n\n      if( options.v4Compat && !currentKitRefreshed.shimEnabled ) {\n        optionsUpdate.v4Compat = false\n      } else if( !options.v4Compat && currentKitRefreshed.shimEnabled ) {\n        optionsUpdate.v4Compat = true\n      }\n\n      dispatch({type: 'OPTIONS_FORM_SUBMIT_START'})\n\n      return restApiAxios.put(\n        `${apiUrl}/config`,\n        { \n          options: {\n            ...options, ...optionsUpdate\n          }\n        },\n        {\n          headers: {\n            'X-WP-Nonce': apiNonce\n          }\n        }\n      ).then(response => {\n        const { data, falsePositive } = response\n\n        if ( falsePositive ) return handleKitUpdateError(response)\n\n        dispatch({\n          type: 'OPTIONS_FORM_SUBMIT_END',\n          data,\n          success: true,\n          message: __( 'Kit changes saved', 'font-awesome' )\n        })\n      }).catch(handleKitUpdateError)\n    }).catch(handleKitsQueryError)\n  }\n}\n\nexport function submitPendingOptions() {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl, options, pendingOptions } = getState()\n\n    dispatch({type: 'OPTIONS_FORM_SUBMIT_START'})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'OPTIONS_FORM_SUBMIT_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE \n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/config`,\n      { options: { ...options, ...pendingOptions }},\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'OPTIONS_FORM_SUBMIT_END',\n          data,\n          success: true,\n          message: __( 'Changes saved', 'font-awesome' )\n        })\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function updateApiToken({ apiToken = false, runQueryKits = false }) {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl, options } = getState()\n\n    dispatch({type: 'OPTIONS_FORM_SUBMIT_START'})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'OPTIONS_FORM_SUBMIT_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/config`,\n      { options: { ...options, apiToken }},\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'OPTIONS_FORM_SUBMIT_END',\n          data,\n          success: true,\n          message: __( 'API Token saved', 'font-awesome' )\n        })\n\n        if( runQueryKits ) {\n          return dispatch(queryKits())\n        }\n      }\n    }).catch(handleError)\n  }\n}\n\nexport function userAttemptToStopScanner() {\n  return {\n    type: 'USER_STOP_SCANNER'\n  }\n}\n\nexport function reportDetectedConflicts({ nodesTested = {} }) {\n  return (dispatch, getState) => {\n    const { apiNonce, apiUrl, unregisteredClients, showConflictDetectionReporter } = getState()\n\n    // This should be a noop if by the time we get here the conflict detection reporter\n    // is already gone. That would indicate that the user stopped the scanner before\n    // the current page's scan was complete and report submitted. In that case,\n    // we just ignore the report. Otherwise, this action would try to post results\n    // to a REST route that will no longer be registered and listening, resulting a 404.\n    if( !showConflictDetectionReporter ) {\n      return\n    }\n\n    if( size(nodesTested.conflict) > 0 ) {\n      const payload = Object.keys(nodesTested.conflict).reduce(function(acc, md5){\n        acc[md5] = nodesTested.conflict[md5]\n        return acc\n      }, {})\n\n      dispatch({\n        type: 'CONFLICT_DETECTION_SUBMIT_START',\n        unregisteredClientsBeforeDetection: unregisteredClients,\n        recentConflictsDetected: nodesTested.conflict\n      })\n\n      const handleError = ({ uiMessage }) => {\n        dispatch({\n          type: 'CONFLICT_DETECTION_SUBMIT_END',\n          success: false,\n          message: uiMessage || COULD_NOT_SAVE_CHANGES_MESSAGE\n        })\n      }\n\n      return restApiAxios.post(\n        `${apiUrl}/conflict-detection/conflicts`,\n        payload,\n        {\n          headers: {\n            'X-WP-Nonce': apiNonce\n          }\n        }\n      )\n      .then(response => {\n        const { status, data, falsePositive } = response\n\n        if ( falsePositive ) {\n          handleError(response)\n        } else {\n          dispatch({\n            type: 'CONFLICT_DETECTION_SUBMIT_END',\n            success: true,\n            /**\n             * If get back no data here, that can only mean that a previous\n             * response with garbage in it had an erroneous HTTP 200 status\n             * on it, but no parseable JSON, which is equivalent to a 204.\n             */\n            data: ( 204 === status || 0 === size(data) ) ? null : data\n          })\n        }\n      })\n      .catch(handleError)\n    } else {\n      dispatch({ type: 'CONFLICT_DETECTION_NONE_FOUND' })\n    }\n  }\n}\n\nexport function snoozeV3DeprecationWarning() {\n  return (dispatch, getState) => {\n    const { apiNonce, apiUrl } = getState()\n\n    dispatch({ type: 'SNOOZE_V3DEPRECATION_WARNING_START' })\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: 'SNOOZE_V3DEPRECATION_WARNING_END',\n        success: false,\n        message: uiMessage || COULD_NOT_SNOOZE_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/v3deprecation`,\n      { snooze: true },\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    )\n    .then(response => {\n      const { falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: 'SNOOZE_V3DEPRECATION_WARNING_END',\n          success: true,\n          snooze: true,\n          message: ''\n        })\n      }\n    })\n    .catch(handleError)\n  }\n}\n\nexport function setActiveAdminTab(tab) {\n  return {\n    type: 'SET_ACTIVE_ADMIN_TAB',\n    tab\n  }\n}\n\nexport function setConflictDetectionScanner({ enable = true }) {\n  return function(dispatch, getState) {\n    const { apiNonce, apiUrl } = getState()\n\n    const actionStartType = enable\n      ? 'ENABLE_CONFLICT_DETECTION_SCANNER_START'\n      : 'DISABLE_CONFLICT_DETECTION_SCANNER_START'\n\n    const actionEndType = enable\n      ? 'ENABLE_CONFLICT_DETECTION_SCANNER_END'\n      : 'DISABLE_CONFLICT_DETECTION_SCANNER_END'\n\n    dispatch({type: actionStartType})\n\n    const handleError = ({ uiMessage }) => {\n      dispatch({\n        type: actionEndType,\n        success: false,\n        message: uiMessage || COULD_NOT_START_SCANNER_MESSAGE\n      })\n    }\n\n    return restApiAxios.put(\n      `${apiUrl}/conflict-detection/until`,\n      enable\n        ? Math.floor((new Date((new Date()).valueOf() + (CONFLICT_DETECTION_SCANNER_DURATION_MIN * 1000 * 60))) / 1000)\n        : Math.floor((new Date())/1000) - CONFLICT_DETECTION_SCANNER_DEACTIVATION_DELTA_MS,\n      {\n        headers: {\n          'X-WP-Nonce': apiNonce\n        }\n      }\n    ).then(response => {\n      const { status, data, falsePositive } = response\n\n      if ( falsePositive ) {\n        handleError(response)\n      } else {\n        dispatch({\n          type: actionEndType,\n          data: 204 === status ? null : data,\n          success: true\n        })\n      }\n    }).catch(handleError)\n  }\n}\n","import get from 'lodash/get'\nimport size from 'lodash/size'\nimport { __ } from '@wordpress/i18n'\n\nexport const ERROR_REPORT_PREAMBLE = __( 'Font Awesome WordPress Plugin Error Report', 'font-awesome' )\nconst UI_MESSAGE_DEFAULT = __( 'D\\'oh! That failed big time.', 'font-awesome' )\nconst ERROR_REPORTING_ERROR = __( 'There was an error attempting to report the error.', 'font-awesome' )\nconst REST_NO_ROUTE_ERROR = __( 'Oh no! Your web browser could not reach your WordPress server.', 'font-awesome' )\nconst REST_COOKIE_INVALID_NONCE_ERROR = __( 'It looks like your web browser session expired. Try logging out and log back in to WordPress admin.', 'font-awesome' )\nconst OK_ERROR_PREAMBLE = __( 'The last request was successful, but it also returned the following error(s), which might be helpful for troubleshooting.', 'font-awesome' )\nconst ONE_OF_MANY_ERRORS_GROUP_LABEL = __( 'Error', 'font-awesome' )\nconst FALSE_POSITIVE_MESSAGE = __( 'WARNING: The last request contained errors, though your WordPress server reported it as a success. This usually means there\\'s a problem with your theme or one of your other plugins emitting output that is causing problems.', 'font-awesome' )\nconst UNCONFIRMED_RESPONSE_MESSAGE = __( 'WARNING: The last response from your WordPress server did not include the confirmation header that should be in all valid Font Awesome responses. This is a clue that some code from another theme or plugin is acting badly and causing the wrong headers to be sent.', 'font-awesome')\nconst TRIMMED_RESPONSE_PREAMBLE = __( 'WARNING: Invalid Data Trimmed from Server Response', 'font-awesome' )\nconst EXPECTED_EMPTY_MESSAGE = __( 'WARNING: We expected the last response from the server to contain no data, but it contained something unexpected.', 'font-awesome' )\nconst MISSING_ERROR_DATA_MESSAGE = __( 'Your WordPress server returned an error for that last request, but there was no information about the error.', 'font-awesome' )\n\n/**\n * This both sends appropriately formatted output to the console via console.info,\n * and returns a uiMessage that would be appropriate to display to an admin user.\n */\nfunction handleSingleWpErrorOutput( wpError ) {\n  if( ! get(wpError, 'code') ) {\n    console.info(ERROR_REPORTING_ERROR)\n    return UI_MESSAGE_DEFAULT\n  }\n\n  let uiMessage = null\n  let output = ''\n\n  const message = get(wpError, 'message')\n  if(message) {\n    output = output.concat(`message: ${message}\\n`)\n    uiMessage = message\n  }\n\n  const code = get(wpError, 'code')\n  if(code) {\n    output = output.concat(`code: ${code}\\n`)\n\n    switch(code) {\n      case 'rest_no_route':\n        uiMessage = REST_NO_ROUTE_ERROR\n        break\n      case 'rest_cookie_invalid_nonce':\n        uiMessage = REST_COOKIE_INVALID_NONCE_ERROR\n        break\n      case 'fontawesome_unknown_error':\n        uiMessage = UI_MESSAGE_DEFAULT\n        break\n      default:\n    }\n  }\n\n  const data = get(wpError, 'data')\n\n  if ( 'string' === typeof data ) {\n    output = output.concat(`data: ${data}\\n`)\n  } else {\n    const status = get(wpError, 'data.status')\n    if(status) output = output.concat(`status: ${status}\\n`)\n\n    const trace = get(wpError, 'data.trace')\n    if(trace) output = output.concat(`trace:\\n${trace}\\n`)\n  }\n\n  if( output && '' !== output ) {\n    console.info(output)\n  } else {\n    console.info(wpError)\n  }\n\n  const request = get(wpError, 'data.request')\n  if(request) {\n    console.info(request)\n  }\n\n  const failedRequestMessage = get(wpError, 'data.failedRequestMessage')\n\n  if(failedRequestMessage) {\n    console.info(failedRequestMessage)\n  }\n\n  return uiMessage\n}\n\nfunction handleAllWpErrorOutput(errorData) {\n  const wpErrors = Object.keys(errorData.errors || []).map(code => {\n    // get the first error message available for this code\n    const message = get(errorData, `errors.${code}.0`)\n    const data = get(errorData, `error_data.${code}`)\n\n    return {\n      code,\n      message,\n      data\n    }\n  })\n\n  if(0 === size(wpErrors)) {\n    wpErrors.push({\n      code: 'fontawesome_unknown_error',\n      message: ERROR_REPORTING_ERROR\n    })\n  }\n\n  const uiMessage = wpErrors.reduce((acc, error) => {\n    console.group(ONE_OF_MANY_ERRORS_GROUP_LABEL)\n\n    const msg = handleSingleWpErrorOutput( error )\n\n    console.groupEnd()\n\n    // The uiMessage we should return will be the first error message that isn't\n    // from a 'previous_exception'\n    return (!acc && error.code !== 'previous_exception')\n      ? msg\n      : acc\n  }, null)\n\n  return uiMessage\n}\n\nfunction report(params) {\n  const {\n    error,\n    ok = false,\n    falsePositive = false,\n    confirmed = true,\n    expectEmpty = false,\n    trimmed = ''\n  } = params\n\n  console.group(ERROR_REPORT_PREAMBLE)\n\n  if( ok ) {\n    console.info(OK_ERROR_PREAMBLE)\n  }\n\n  if( falsePositive ) {\n    console.info(FALSE_POSITIVE_MESSAGE)\n  }\n\n  if( ! confirmed ) {\n    console.info(UNCONFIRMED_RESPONSE_MESSAGE)\n  }\n\n  if( '' !== trimmed ) {\n    console.group(TRIMMED_RESPONSE_PREAMBLE)\n    if( expectEmpty ) {\n      console.info(EXPECTED_EMPTY_MESSAGE)\n    }\n    console.info(trimmed)\n    console.groupEnd()\n  }\n\n  const uiMessage = null !== error\n    ? handleAllWpErrorOutput( error )\n    : null\n\n  if ( null === error && trimmed === '' && confirmed ) {\n    console.info(MISSING_ERROR_DATA_MESSAGE)\n  }\n\n  console.groupEnd()\n\n  return uiMessage\n}\n\nexport default report\n","function findJson( content, start = 0 ) {\n  let parsed = null\n  let nextStart = null\n\n  if ( 'string' !== typeof content ) return null\n  if ( start >= content.length ) return null\n\n  try {\n    parsed = JSON.parse( content.slice(start) )\n    return {\n      start,\n      parsed\n    }\n  } catch( _e ) {\n    // search for the next character that would begin a JSON response\n    const nextLeftBracket = content.indexOf('[', start + 1)\n    const nextLeftBrace = content.indexOf('{', start + 1)\n\n    if( -1 === nextLeftBracket && -1 === nextLeftBrace ) {\n      // we've search to the end and found no chars that would start JSON content\n      return null\n    } else {\n      if ( -1 !== nextLeftBracket && -1 !== nextLeftBrace ) {\n        // if we found both, take the lower one\n        nextStart = nextLeftBracket < nextLeftBrace\n          ? nextLeftBracket\n          : nextLeftBrace\n      } else if ( -1 !== nextLeftBrace ) {\n        nextStart = nextLeftBrace\n      } else {\n        nextStart = nextLeftBracket\n      }\n    }\n  }\n\n  if ( null === nextStart ) {\n    return null\n  } else {\n    return findJson( content, nextStart )\n  }\n}\n\n/**\n * Searches through the given content trying to skip over any non-JSON string\n * data to find JSON data.\n * \n * Returns null if none found.\n * \n * Otherwise, returns an object indicating the starting index for the found JSON,\n * the json content as an unparsed string, the non-json content trimmed from the\n * beginning, and the parsed JSON.\n */\nfunction sliceJson( content ) {\n  if(! content || '' === content ) return null\n\n  const result = findJson( content )\n\n  if ( null === result ) {\n    return null\n  } else {\n    const { start, parsed } = result\n\n    return {\n      start,\n      json: content.slice(start),\n      trimmed: content.slice(0, start),\n      parsed\n    }\n  }\n}\n\nexport default sliceJson\n"],"sourceRoot":""}